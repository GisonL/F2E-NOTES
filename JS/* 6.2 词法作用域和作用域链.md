# 词法作用域和作用域链

### 作用域

​	作用域是指程序源代码中定义变量的区域。

​	作用域规定了如何查找变量，也就是确定当前执行代码对变量的访问权限。

​	JavaScript 采用词法作用域(lexical scoping)，也就是静态作用域。

### 什么是词法作用域

​	因为 JavaScript 采用的是词法作用域，函数的作用域在函数定义的时候就决定了。而与词法作用域相对的是动态作用域，函数的作用域是在函数调用的时候才决定的。

​	函数的作用域在函数定义的时候就决定了，函数的执行上下文带有一个上层父级上下文的变量对象的引用，形成了一条作用域链，这也是为什么当在一个函数中使用在该作用域中声明的变量时，引用的是该作用域中的同名标识符的变量（先在当前上下文变量对象上找属性），而如果使用一个非声明语句声明的变量时，会去函数所在的上一层作用域去寻找同名变量的原因。



#### 作用域链

​	函数创建的时候，保存的是根据词法所生成的作用域链，函数执行的时候，会复制这个作用域链，作为自己作用域链的初始化，然后根据环境生成变量对象，然后将这个变量对象，添加到这个复制的作用域链，这才完整的构建了自己的作用域链。至于为什么会有两个作用域链，是因为在函数创建的时候并不能确定最终的作用域的样子，为什么会采用复制的方式而不是直接修改呢？应该是因为函数会被调用很多次吧。


